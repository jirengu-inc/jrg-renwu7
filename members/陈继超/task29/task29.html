<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title> jquery 回到顶部 视屏demo 和问答 </title>
    <script src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.js"></script>
    <style>
        *{margin: 0; padding: 0;}
        body{
            min-height: 10000px;
        }
        div{
            /*margin: 100px;*/
            /*padding: 10px;*/
            background: #eee;
            /*font-size: 20px;*/
        }
        .footer{
            margin-top: 900px;
        }
    </style>
</head>
<body>
    <div class="ct1">我是一个div</div>
    <div class="footer">目标-------我是footer</div>

<script>
// 1.如何判断一个元素是否出现在窗口可视范围（浏览器的上边缘和下边缘之间，肉眼可视）。写一个函数 isVisible实现



    function isVisible($node) {

        var v_top = $node.offset().top, // 距离原点高度  // $node = $('.footer')
            v_left = $node.offset().left, // 距离原点左边距离
            win_top = $(window).scrollTop(), // 窗口的垂直滚动距离
            win_H = $(window).height(),  // 视窗的高度
            v_H = $node.height();       // 自身的高度

        if ( win_H + win_top > v_top && v_top + v_H > win_top  ) {
//            console.log('出现啦');
            return true;
        } else {
            return false;
        }
    }
//    $(window).on('scroll',function(){
//        isVisible( $('.footer') );
//    })

// 3. 第一次出现打印 true  其他出现都不打印

    $(window).on('scroll',function(){
        e = $('.footer');
        if(isVisible(e)){
            isShow(e)
        }
    });

    function isShow(e){
        if (! e.data('Showed')){
            console.log("true");
            e.data('Showed', true);
        }
    }

</script>
</body>
</html>