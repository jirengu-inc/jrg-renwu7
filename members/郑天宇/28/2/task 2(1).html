<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>task 28-2</title>
    <script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
    <script src="stickUp.min.js"></script>
    <style>
        .header{
            width: 900px;
            height: 30px;
            margin: 0 auto;
            background: #cbcbcb;
        }
        .content{
            min-height: 900px;
            width: 900px;
            margin: 20px auto;
            background: #8a939b;
        }
        .aside{
            height: 600px;
            width: 50px;
            background: #7a3828;
            float: left;
        }
        .main{
            width: 500px;
            height: 400px;
            overflow: auto;
            background: #fed136;
        }
        .footer{
            margin: 20px auto;
            height: 50px;
            width: 900px;
            background: #0000ff;

        }
        .nav{
            width: 900px;
            height: 60px;
            background: #333333;
        }
    </style>
</head>
<body>
    <!--<div class="nav">nav</div>-->

    <div class="header" >header1</div>
    <div class="content">
        <div class="aside">aside</div>
        <div class="main">main</div>
    </div>
    <div class="footer">footer</div>

    <div class="header" >header2</div>
    <div class="content">
        <div class="aside">aside</div>
        <div class="main">main</div>
    </div>
    <div class="footer">footer</div>



    <div class="header" >header3</div>
    <div class="content">
        <div class="aside">aside</div>
        <div class="main">main</div>
    </div>
    <div class="footer">footer</div>

    <script>
        $('.header').each(function () {
        var $target=$(this);
        var $targetH=$target.height();
        var $targetW=$target.width();
        var offsettop=$target.offset().top;
        var offsetleft=$target.offset().left;



        var clone=$target.clone().css({'display':'none'}).insertBefore($target);


        $(window).on('scroll',function () {
            var scrolltop=$(this).scrollTop();
            if(scrolltop>=offsettop){
                if(!isfixed()){
                    setfixed();
                }
            }

            else if(isfixed()){
                unsetfixed()
            }
        });

        function isfixed() {
            return !!$target.data('data-fixed');
        }
        function setfixed() {

            $target.eq(0).data('data-fixed',true).css({
                'position':'fixed',
                'top':0,
                'left':offsetleft,
                'width':$targetW,
                'margin':0,
                'z-Index':9999

            });
            clone.show();

        }
        function unsetfixed() {
            $target.data('data-fixed',false)
                    .removeAttr('style');
            clone.hide();

        }

        });
//jQuery(function($) {
//
//    $(document).ready(function () {
//
//        $('.nav').stickUp({
//            parts: {
//                0: 'home',
//                1: 'park',
//                2: 'footer'
//            },
//            itemClass: 'header',
//           itemHover: 'active',
//            marginTop: 'auto'
//        })
//
//
//    })
//})
    </script>
</body>
</html>